# #
# # General kernel options
# #
# CONFIG_MAIN_STACK_SIZE=2048
# CONFIG_IDLE_STACK_SIZE=512
# CONFIG_ISR_STACK_SIZE=2048
# CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096
# CONFIG_HEAP_MEM_POOL_SIZE=4096
# CONFIG_MULTITHREADING=y

# #
# # Logging / Debugging
# #
# CONFIG_LOG=y
# CONFIG_LOG_MODE_IMMEDIATE=y
# CONFIG_SENSOR_LOG_LEVEL_DBG=y
# CONFIG_DEBUG_OPTIMIZATIONS=y
# CONFIG_COMPILER_OPT=""
# CONFIG_CBPRINTF_FP_SUPPORT=y
# CONFIG_STDOUT_CONSOLE=y

# #
# # Power management
# #
# CONFIG_PM_DEVICE=y
# CONFIG_BT_ID_MAX=2
# CONFIG_BT_BROADCASTER=y  
# CONFIG_BT_PER_ADV=y
# #
# # Bluetooth
# #
# CONFIG_BT=y
# CONFIG_BT_DEBUG_LOG=y
# CONFIG_BT_EXT_ADV=y
# CONFIG_BT_PERIPHERAL=y
# CONFIG_BT_CENTRAL=n
# CONFIG_BT_DEVICE_NAME="AutomaticDataLogger"
# CONFIG_NODE_ID=01
# CONFIG_SENSOR_ADDRESS="DE:AD:BE:AF:BA:44"
# CONFIG_LIS2DH_ACCEL_RANGE_2G=y
# CONFIG_BT_CTLR_ADV_EXT=y
# CONFIG_BT_CTLR_ADV_DATA_LEN_MAX=251  
# CONFIG_BT_CTLR_TX_PWR_PLUS_4=y

# #
# # Bluetooth: Observer / Scanner
# #
# CONFIG_BT_OBSERVER=y
# CONFIG_BT_SCAN=y
# CONFIG_BT_EXT_SCAN_BUF_SIZE=1650
# CONFIG_BT_BUF_EVT_RX_COUNT=20


# #
# # GPIO / Button / LED
# #
# CONFIG_GPIO=y

# #
# # I2C / Sensor (LIS2DH accelerometer)
# #
# CONFIG_I2C=y
# CONFIG_SENSOR=y
# CONFIG_LIS2DH=y

# #
# # Flash / QSPI NOR external memory
# #
# CONFIG_FLASH=y
# CONFIG_SPI=y
# CONFIG_SPI_NOR=y
# CONFIG_NORDIC_QSPI_NOR=y
# CONFIG_NORDIC_QSPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096
# # CONFIG_NORDIC_QSPI_NOR_STACK_WRITE_BUFFER_SIZE=16  # enable if needed
# # CONFIG_NRFX_QSPI=y                                # enable if you want raw QSPI


# # Flash map and partition manager
# CONFIG_FLASH_MAP=y
# CONFIG_FLASH=y
# CONFIG_FLASH_PAGE_LAYOUT=y
# #
# # PWM (if needed later)
# #
# # CONFIG_SERIAL=n   # enable when data logging over UART is not needed
# # CONFIG_LOG=n


# #
# # General kernel options
# #
# CONFIG_MAIN_STACK_SIZE=4096
# CONFIG_IDLE_STACK_SIZE=1024
# CONFIG_ISR_STACK_SIZE=4096
# CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096
# CONFIG_HEAP_MEM_POOL_SIZE=4096
# CONFIG_MULTITHREADING=y

# #
# # Logging / Debugging
# #
# CONFIG_LOG=y
# CONFIG_LOG_MODE_IMMEDIATE=y
# CONFIG_SENSOR_LOG_LEVEL_DBG=y
# CONFIG_DEBUG_OPTIMIZATIONS=y
# CONFIG_COMPILER_OPT=""
# CONFIG_CBPRINTF_FP_SUPPORT=y
# CONFIG_STDOUT_CONSOLE=y

# #
# # Power management
# #
# CONFIG_PM_DEVICE=y
# CONFIG_BT_ID_MAX=2 

# #
# # Bluetooth - Core
# #
# CONFIG_BT=y
# CONFIG_BT_DEBUG_LOG=y

# #
# # Bluetooth - Advertising
# #
# CONFIG_BT_BROADCASTER=y  
# CONFIG_BT_PER_ADV=y
# CONFIG_BT_PERIPHERAL=y
# CONFIG_BT_CTLR_ADV_EXT=y
# CONFIG_BT_CTLR_TX_PWR_PLUS_4=y

# #
# # Bluetooth - Scanning / Observer (ADDED)
# #
# CONFIG_BT_OBSERVER=y       # <-- Required for scanning
# CONFIG_BT_CENTRAL=n        # <-- Required for initiating scanning
# CONFIG_BT_SCAN=y           # (Optional helper module)

# # Enable Extended Scanning
# CONFIG_BT_EXT_ADV=y
# CONFIG_BT_CTLR_ADV_DATA_LEN_MAX=251  
# # Increase Bluetooth RX thread stack size
# CONFIG_BT_RX_STACK_SIZE=2048

# #
# # Application-specific configs
# #
# CONFIG_NODE_ID=01
# CONFIG_SENSOR_ADDRESS="DE:AD:BE:AF:BA:44"
# CONFIG_BT_DEVICE_NAME="AutomaticLogger"

# #
# # GPIO / Button / LED
# #
# CONFIG_GPIO=y

# #
# # I2C / Sensor (LIS2DH accelerometer)
# #
# CONFIG_I2C=y
# CONFIG_SENSOR=y
# CONFIG_LIS2DH=y
# CONFIG_LIS2DH_ACCEL_RANGE_2G=y

# #
# # Flash / QSPI NOR external memory
# #
# CONFIG_FLASH=y
# CONFIG_SPI=y
# CONFIG_SPI_NOR=y
# CONFIG_NORDIC_QSPI_NOR=y
# CONFIG_FLASH_MAP=y
# CONFIG_FLASH_PAGE_LAYOUT=y

# # Debug stack overflows
# CONFIG_STACK_SENTINEL=y
# CONFIG_STACK_CANARIES=y
# CONFIG_THREAD_NAME=y

# CONFIG_BT=y
# CONFIG_BT_OBSERVER=y
# CONFIG_BT_BROADCASTER=y
# CONFIG_BT_FILTER_ACCEPT_LIST=y


# # Enable Extended Scanning
# CONFIG_BT_EXT_ADV=y
# CONFIG_BT_PER_ADV=y
# CONFIG_BT_EXT_SCAN_BUF_SIZE=1650

# # Zephyr Bluetooth LE Controller needs 16 event buffers to generate Extended
# # Advertising Report for receiving the complete 1650 bytes of data
# CONFIG_BT_BUF_EVT_RX_COUNT=20

# # Set maximum scan data length for Extended Scanning in Bluetooth LE Controller
# CONFIG_BT_CTLR_SCAN_DATA_LEN_MAX= 1650

# # Increase Zephyr Bluetooth LE Controller Rx buffer to receive complete chain
# # of PDUs
# CONFIG_BT_CTLR_RX_BUFFERS=16

# CONFIG_BT_CTLR_FAL_SIZE=8

# #PERIODIC SCANNING CONFIGURATION 
# CONFIG_BT_PER_ADV_SYNC=y
# CONFIG_BT_CTLR_SYNC_PERIODIC=y
# CONFIG_BT_PER_ADV_SYNC_BUF_SIZE=1650
# CONFIG_BT_CTLR_SDC_PERIODIC_SYNC_BUFFER_COUNT=2

# CONFIG_SERIAL=y
# CONFIG_LOG=y

# CONFIG_MAIN_STACK_SIZE=8192
# CONFIG_BT_CTLR_ADV_DATA_LEN_MAX=1650


# CONFIG_MULTITHREADING=y




# #new


# CONFIG_BT=y
# CONFIG_BT_DEBUG_LOG=y

# CONFIG_PM=y
# CONFIG_PM_DEVICE=y
# CONFIG_CBPRINTF_FP_SUPPORT=y
# CONFIG_BT_CTLR_ADV_EXT=y

# CONFIG_GPIO=y
# CONFIG_ENTROPY_GENERATOR=y
# CONFIG_TEST_RANDOM_GENERATOR=y
# CONFIG_INIT_STACKS=y
# CONFIG_HW_STACK_PROTECTION=y
# CONFIG_NEWLIB_LIBC=y

# #WINBOND
# CONFIG_STDOUT_CONSOLE=y



# #logs
# CONFIG_LOG_MODE_MINIMAL=y


# ============================
# prj.conf â€” optimized for scanning + extended advertising
# ============================

# --- Kernel / threading / stacks / heap ---
CONFIG_MULTITHREADING=y
CONFIG_MAIN_STACK_SIZE=8192            
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096
CONFIG_IDLE_STACK_SIZE=1024
CONFIG_ISR_STACK_SIZE=4096
CONFIG_HEAP_MEM_POOL_SIZE=4096

# Safety & debug helpers
CONFIG_STACK_SENTINEL=y
CONFIG_STACK_CANARIES=y
CONFIG_THREAD_NAME=y

# --- Logging & Console ---
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3            
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_LOG_BUFFER_SIZE=4096
CONFIG_STDOUT_CONSOLE=y
CONFIG_CONSOLE=y
CONFIG_SERIAL=y
CONFIG_UART_CONSOLE=y
CONFIG_LOG_BACKEND_UART=y

# --- Power mgmt (optional but useful) ---
CONFIG_PM=y
CONFIG_PM_DEVICE=y

# --- Bluetooth core ---
CONFIG_BT=y
CONFIG_BT_DEVICE_NAME="AutomaticLogger"
CONFIG_BT_ID_MAX=2

# --- Roles & features: scanning + extended advertising ---
CONFIG_BT_OBSERVER=y                  # enable scanning / observer role
CONFIG_BT_SCAN=y                      # helper scanning code
CONFIG_BT_BROADCASTER=y               # allow advertising
CONFIG_BT_EXT_ADV=y                   # extended advertising support
CONFIG_BT_PER_ADV=y                    # periodic advertising (if you use it)
CONFIG_BT_PERIPHERAL=y                # allow peripheral role (if you also accept connections)
CONFIG_BT_CTLR_ADV_EXT=y              # controller ext adv support
CONFIG_BT_CTLR_ADV_DATA_LEN_MAX=256  
CONFIG_BT_CTLR_SCAN_DATA_LEN_MAX=256 
CONFIG_BT_CTLR_RX_BUFFERS=16         
CONFIG_BT_BUF_EVT_RX_COUNT=20        
CONFIG_BT_EXT_SCAN_BUF_SIZE=1650      
CONFIG_BT_CTLR_FAL_SIZE=8            

# Receiver performance tuning
CONFIG_BT_RX_STACK_SIZE=2048

# Optional: accept-list if you ever want whitelist
CONFIG_BT_FILTER_ACCEPT_LIST=y

# --- Controller and low-level tweaks ---
CONFIG_BT_CTLR_TX_PWR_PLUS_4=y        

# --- Flash, SPI, sensors, GPIO (app needs these) ---
CONFIG_FLASH=y
CONFIG_SPI=y
CONFIG_SPI_NOR=y
CONFIG_NORDIC_QSPI_NOR=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y

CONFIG_GPIO=y
CONFIG_I2C=y
CONFIG_SENSOR=y
CONFIG_LIS2DH=y
CONFIG_LIS2DH_ACCEL_RANGE_2G=y

# --- Misc helpful options ---
CONFIG_ENTROPY_GENERATOR=y
CONFIG_CBPRINTF_FP_SUPPORT=y
CONFIG_INIT_STACKS=y
CONFIG_HW_STACK_PROTECTION=y
CONFIG_NEWLIB_LIBC=n                   

# --- Reduce footprint: tweak if needed ---
# If RAM is tight, consider lowering MAIN_STACK_SIZE and LOG_BUFFER_SIZE after testing


